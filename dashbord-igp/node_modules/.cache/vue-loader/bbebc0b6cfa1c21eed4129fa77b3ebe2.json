{"remainingRequest":"/home/assita/dashbord-igp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/assita/dashbord-igp/src/views/logistique/materiel/show.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/assita/dashbord-igp/src/views/logistique/materiel/show.vue","mtime":1642083620267},{"path":"/home/assita/dashbord-igp/node_modules/cache-loader/dist/cjs.js","mtime":1642074364992},{"path":"/home/assita/dashbord-igp/node_modules/babel-loader/lib/index.js","mtime":1642074365772},{"path":"/home/assita/dashbord-igp/node_modules/cache-loader/dist/cjs.js","mtime":1642074364992},{"path":"/home/assita/dashbord-igp/node_modules/vue-loader/lib/index.js","mtime":1642074365976}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7VVJMX0xPR0lTVElRVUVfQVBJfSBmcm9tICdAL2NvbmZpZycKaW1wb3J0IHtVUkxfTE9HSVNUSVFVRX0gZnJvbSAnQC9jb25maWcnCi8vaW1wb3J0IHtVUkxfTE9HSVNUSVFVRX0gZnJvbSAnQC9jb25maWcnCi8vIEltcG9ydCBjb21wb25lbnQKaW1wb3J0IExvYWRpbmcgZnJvbSAndnVlLWxvYWRpbmctb3ZlcmxheSc7Ci8vIEltcG9ydCBzdHlsZXNoZWV0CmltcG9ydCAndnVlLWxvYWRpbmctb3ZlcmxheS9kaXN0L3Z1ZS1sb2FkaW5nLmNzcyc7CmltcG9ydCBTd2FsIGZyb20gJ3N3ZWV0YWxlcnQyJwpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgICAgIExvYWRpbmcKICAgIH0sCiAgICBkYXRhKCkKICAgICB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIFVSTF9MT0dJU1RJUVVFOlVSTF9MT0dJU1RJUVVFLAogICAgICAgICAgICBtYXRlcmllbDpbXSwKICAgICAgICAgICAgbWF0ZXJpZWxsaXN0OltdLAogICAgICAgICAgICBpbWFnZXM6W10sCiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIGZ1bGxQYWdlOiB0cnVlLAogICAgICAgICAgICB0b2Y6ZmFsc2UsCiAgICAgICAgICAgIHBob3RvczpbXQogICAgICAgIH07CiAgICB9LAoKICAgIG1vdW50ZWQoKXsKICAgICAgIC8vdGhpcy5nZXRNYXRlcmllbFR5cGUoKQogICAgICAgIHRoaXMuZ2V0TWF0ZXJpZWwoKQogICAgfSwKCiAgICBtZXRob2RzOnsKICAgICAgICBzdG9yZSgpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9lZGl0LW1hdGVyaWVsLXByb2R1Y3QvJyt0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgICAgfSwKCgogICAgICAgIGFkZEJvb2xQaG90byhib29sKSAKICAgICAgICB7CiAgICAgICAgICAgIHRoaXMudG9mID0gYm9vbAogICAgICAgIH0sCgoKICAgICAgIGFkZFBob3RvKCkgCiAgICAgICB7CiAgICAgICAgICAgIHZhciBwcm9kdWN0RGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICB0aGlzLnBob3RvcyA9IHRoaXMuJHJlZnMucGhvdG9zLmZpbGVzCiAgICAgICAgICAgIGZvciggdmFyIGkgPSAwOyBpIDwgdGhpcy5waG90b3MubGVuZ3RoOyBpKysgKXsKICAgICAgICAgICAgICAgIGxldCBmaWxlID0gdGhpcy5waG90b3NbaV07CiAgICAgICAgICAgICAgICBwcm9kdWN0RGF0YS5hcHBlbmQoJ3Bob3RvWycgKyBpICsgJ10nLCBmaWxlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcm9kdWN0RGF0YS5hcHBlbmQoJ3Byb2R1Y3RfaWQnLHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKCiAgICAgICAgICAgIGF4aW9zLnBvc3QoVVJMX0xPR0lTVElRVUVfQVBJKydhZGRGaWxlJywgcHJvZHVjdERhdGEpCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWVsID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy5nZXRNYXRlcmllbCgpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JlZCA9IHRydWUKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICB9LAoKCiAgICAgICAgZ2V0TWF0ZXJpZWwoKSAKICAgICAgICB7CiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtYXRlcmllbGhoaCcpCiAgICAgICAgICAgIGF4aW9zLmdldCgnaHR0cDovLzE5Mi4xNjguMS43OjgwMDYvYXBpL3Byb2R1Y3RzLycrdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YSkKICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpZWwgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICB0aGlzLmltYWdlcyA9IHJlcy5kYXRhLmRhdGEucGhvdG8KICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtYXRlcmllbCcsdGhpcy5tYXRlcmllbCkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICB9KQogICAgICAgIH0sCgogICAgICAgLypnZXRNYXRlcmllbFR5cGUoKXsKICAgICAgICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vMTkyLjE2OC4xLjc6ODAwNi9hcGkvcHJvZHVjdHMnKQogICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5tYXRlcmllbGxpc3QgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JlZCA9IHRydWUKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICB9LCovCgoKICAgICAgICBkZXN0cm95UGF0aChwYXRoKSB7CiAgICAgICAgICAgIC8vbGV0IGFwcCA9IHRoaXMKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnVm91bGV6LXZvdXMgc3VwcHJpbWVyIGNldHRlIGltYWdlPycsCiAgICAgICAgICAgICAgICB0ZXh0OiAiY2V0dGUgYWN0aW9uIGVzdCBpcnJldmVyc2libGUhIiwKICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICcjMzA4NWQ2JywKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAnI2QzMycsCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ091aSwgc3VwcHJpbWVyIScKICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmlzQ29uZmlybWVkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSAgdHJ1ZQogICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoVVJMX0xPR0lTVElRVUUrJ2RlbGV0ZUZpbGUnLHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9pZDp0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6cGF0aAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAvLyBhcHAuZ2V0UHJvZHVjdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gIGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTdXBwcmltw6khJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdMYSBsaWduZSBhIMOpdMOpIHN1cHByaW3DqWUuJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJwogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9ICBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgIH0KfQo="},{"version":3,"sources":["show.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"show.vue","sourceRoot":"src/views/logistique/materiel","sourcesContent":["<template>\n    <div class=\"content-page\">\n        <div class=\"container-fluid add-form-list\">\n            <div class=\"row\">\n                <div class=\"col-sm-12\">\n                    <div class=\"card\">\n                        <div class=\"card-header d-flex justify-content-between\">\n                            <div class=\"header-title\">\n                                <h4 class=\"card-title\">Détails d'un Produit Logistique</h4>\n                                \n                            </div>\n                        </div>\n                        <div class=\"card-body\">\n                            <!-- <form  action=\"#\" data-toggle=\"validator\"> -->\n                                 \n                                  <div class=\"row\">\n                                    <div class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>Libelle *</label>\n                                            <input type=\"text\" v-model=\"materiel.libelle\" class=\"form-control\" placeholder=\"Entrer libelle\" required>\n                                            <div class=\"help-block with-errors\"></div>\n                                        </div>\n                                    </div>\n                                   \n                                     <div class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>slug *</label>\n                                            <input type=\"text\"  v-model=\"materiel.slug\" class=\"form-control\" placeholder=\"Entrer adresse\" required>\n                                            <div class=\"help-block with-errors\"></div>\n                                        </div>\n                                    </div> \n                                    <div class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>Prix *</label>\n                                            <input type=\"number\" min=\"0\" v-model=\"materiel.price\" class=\"form-control\" placeholder=\"Entrer adresse\" required>\n                                            <div class=\"help-block with-errors\"></div>\n                                        </div>\n                                    </div>     \n                                    <div class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>reduction (%) *</label>\n                                            <input type=\"number\" min=\"0\" v-model=\"materiel.discount\" class=\"form-control\" placeholder=\"Entrer adresse\" required>\n                                            <div class=\"help-block with-errors\"></div>\n                                        </div>\n                                    </div> \n                                   <!--<div class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>Categorie *</label>\n                                            <select v-model=\"materiel.product_id\" class=\"form-control\">\n                                                <option v-for=\"(materiel,index) in productlist\" :key=\"index\" :value=\"product.id\"> {{materiel.libelle}} </option>\n                                            </select>\n                                            <div class=\"help-block with-errors\"></div>\n                                        </div>\n                                    </div>-->\n                                     <div class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>description *</label>\n                                            <input type=\"text\"  min=\"0\" v-model=materiel.description class=\"form-control\"  required>\n                                            <div class=\"help-block with-errors\"></div>\n                                        </div>\n                                    </div> \n                                    <div class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>Stock *</label>\n                                            <input type=\"text\" min=\"0\" v-model=\"materiel.stock\" class=\"form-control\" placeholder=\"Entrer adresse\" required>\n                                            <div class=\"help-block with-errors\"></div>\n                                        </div>\n                                    </div>\n                                      <div class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>Photo *</label>\n                                           <!-- <img :src=\"materiel.photo\">  -->\n                                            <div class=\"help-block with-errors\"></div>\n                                        </div>\n                                    </div> \n                                    <div v-for=\"n in images\" :key=\"n\" class=\"col-md-6\">\n                                        <div class=\"form-group\">\n                                            <label>Photo *</label>\n                                            <img :src=\"URL_LOGISTIQUE+n.path\" alt=\"\" width=\"20%\">\n                                            <button class=\" btn btn-secondary\" @click=\"destroyPath(n.path)\"><i class=\"fa fa-trash\"></i></button>\n                                        </div>\n                                    </div>  \n                                    <div v-if=\"tof\">\n                                        <label for=\"\">Ajouter une photo</label>\n                                        <input type=\"file\" ref=\"photos\" multiple>\n                                    </div>  \n                                    \n                                                         \n                                </div>                            \n                                <button type=\"submit\" @click=\"store\" class=\"btn btn-primary mr-2\">Modifier</button>\n                                <button  class=\"btn btn-secondary mr-2\" @click=\"addBoolPhoto(true)\" v-if=\"!tof\">Ajouter une image</button>\n                                <button  class=\"btn btn-secondary mr-2\" @click=\"addPhoto()\" v-else>enregistrer l'image</button>\n                                <button type=\"reset\" class=\"btn btn-danger\">reinitialiser</button>\n                            <!-- </form> -->\n                        </div>\n                    </div>\n                    <div class=\"vld-parent\">\n                        <loading :active.sync=\"isLoading\" \n                        :can-cancel=\"true\" \n                        :is-full-page=\"fullPage\"></loading>\n                    </div>\n                </div>\n            </div>\n            <!-- Page end  -->\n        </div>\n    </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport {URL_LOGISTIQUE_API} from '@/config'\nimport {URL_LOGISTIQUE} from '@/config'\n//import {URL_LOGISTIQUE} from '@/config'\n// Import component\nimport Loading from 'vue-loading-overlay';\n// Import stylesheet\nimport 'vue-loading-overlay/dist/vue-loading.css';\nimport Swal from 'sweetalert2'\nexport default {\n    components: {\n            Loading\n    },\n    data()\n     {\n        return {\n          URL_LOGISTIQUE:URL_LOGISTIQUE,\n            materiel:[],\n            materiellist:[],\n            images:[],\n            isLoading: false,\n            fullPage: true,\n            tof:false,\n            photos:[]\n        };\n    },\n\n    mounted(){\n       //this.getMaterielType()\n        this.getMateriel()\n    },\n\n    methods:{\n        store() {\n            this.$router.push('/edit-materiel-product/'+this.$route.params.id)\n        },\n\n\n        addBoolPhoto(bool) \n        {\n            this.tof = bool\n        },\n\n\n       addPhoto() \n       {\n            var productData = new FormData();\n            this.photos = this.$refs.photos.files\n            for( var i = 0; i < this.photos.length; i++ ){\n                let file = this.photos[i];\n                productData.append('photo[' + i + ']', file);\n            }\n            productData.append('product_id',this.$route.params.id)\n\n            axios.post(URL_LOGISTIQUE_API+'addFile', productData)\n            .then(res => {\n                this.materiel = res.data.data\n                this.isLoading = false\n                this.getMateriel()\n            })\n            .catch(error => {\n                console.log(error)\n                this.errored = true\n                this.isLoading = false\n            })\n        },\n\n\n        getMateriel() \n        {\n            this.isLoading = true\n            //console.log('materielhhh')\n            axios.get('http://192.168.1.7:8006/api/products/'+this.$route.params.id)\n            .then(res => {\n                console.log(res.data.data)\n                this.materiel = res.data.data\n                this.images = res.data.data.photo\n                this.isLoading = false\n                console.log('materiel',this.materiel)\n            })\n            .catch(error => {\n                console.log(error)\n                this.errored = true\n                this.isLoading = false\n            })\n        },\n\n       /*getMaterielType(){\n            axios.get('http://192.168.1.7:8006/api/products')\n            .then(res => {\n                this.materiellist = res.data.data\n                this.isLoading = false\n            })\n            .catch(error => {\n                console.log(error)\n                this.errored = true\n                this.isLoading = false\n            })\n        },*/\n\n\n        destroyPath(path) {\n            //let app = this\n            Swal.fire({\n                title: 'Voulez-vous supprimer cette image?',\n                text: \"cette action est irreversible!\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#3085d6',\n                cancelButtonColor: '#d33',\n                confirmButtonText: 'Oui, supprimer!'\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    this.isLoading =  true\n                    axios.post(URL_LOGISTIQUE+'deleteFile',{\n                        product_id:this.$route.params.id,\n                        path:path\n                    })\n                    .then(res => {\n                       // app.getProduct()\n                        console.log(res.data.data)\n                        this.isLoading =  false\n                        Swal.fire(\n                            'Supprimé!',\n                            'La ligne a été supprimée.',\n                            'success'\n                        )\n                    })\n                    .catch(error => {\n                        console.log(error)\n                        this.errored = true\n                        this.isLoading =  false\n                    })\n                }\n            })\n        },\n    }\n}\n</script>"]}]}